;/*!feedback/main.atom*/
define("wiseatom/feedback/main",["require","exports","module","@baidu/ala-util","search-ui/v2/Row/Row","search-ui/v2/Row/Span","search-ui/v2/Icon/Icon"],function(e,t,a){var n={exports:{}};!function(e){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fb-view"},[a("div",{staticClass:"fb-bar"},[e.maskShow?a("div",{staticClass:"fb-bar-entity c-gap-inner-top c-gap-inner-bottom"},[a("div",{staticClass:"fb-bar-left"},[a("c-icon",{attrs:{type:"close_line"},on:{click:e.destroy}})],1),a("span",{staticClass:"fb-bar-center"},[e._v("用户反馈")]),a("a",{staticClass:"fb-bar-right",attrs:{href:e.myFeedback},on:{click:e.myFeedClick}},[a("span",{staticClass:"c-color c-font-medium"},[e._v("我的反馈")])])]):e._e()])])
},staticRenderFns:[]}}(n,n.exports);var s={exports:{}};!function(t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=(e("@baidu/ala-util"),$("body"));a.default={mounted:function(){var e=this;page.one("destroy",function(){e.destroy()})},watch:{show:function(){this.maskShow=!0,this.init()},sugShow:function(){this.init("sug")},alaShow:function(){this.init("ala")}},methods:{init:function(e){page.utils.ss.getItem("feedback")&&page.utils.ss.setItem("feedback",null),e?"sug"===e?(this.saveSugData(),this.sendLog("sug")):(this.sendLog("ala"),this.saveAlaData()):(this.initMask(),this.bindResultEvent(),this.sendLog("normal"))
},initMask:function(){var e=this,t='<div class="fb-bar-entity fb-bar-bottom c-gap-inner-top c-gap-inner-bottom"><div class="c-font-medium c-gap-inner-bottom c-color c-gap-left c-gap-right">'+e.barText+'</div></div><div class="fb-mask"></div>';n.prepend(t);var a=void 0;a=page.comm&&page.comm.browserid&&"6"===page.comm.browserid?93:88;{var s=n.height()+a;n.find(".se-page-hd").height()}n.find(".fb-mask").css({height:s+"px"}),n.css("padding-top",a+"px"),n.scrollTop(0),$("html").scrollTop(0)},bindResultEvent:function(){var e=this,t=n.find(".result"),a=n.find(".ec_wise_ad"),s=n.find(".se-page-relative"),i='<div class="fb-res-mask"><div class="fb-res-inner"><div class="fb-res-button c-gap-top c-gap-right c-gap-inner-left-middle c-gap-inner-right-middle"><i class="c-icon fb-res-button-icon">&#xe62d</i><span>反馈</span></div><div class="fb-res-button-touch c-gap-top c-gap-right"></div></div></div>',r=void 0;
this.addStyle(".c-result,.ec_wise_ad,.se-page-relative{position: relative;}"),t.append(i),t.forEach(function(e){$(e).find(".c-recomm-wrap").length>0&&"none"!==$(e).find(".c-recomm-wrap").css("display")&&(r=$(e).height()-$(e).find(".c-recomm-wrap").height()-10,$(e).find(".fb-res-mask").css({height:r+"px"}))}),s.append(i),a.append(i);var o=n.find(".fb-res-button").eq(0).width();n.find(".fb-res-button-touch").width(o),t.undelegate(".fb-res-button-touch","click"),a.undelegate(".fb-res-button-touch","click"),s.undelegate(".fb-res-button-touch","click"),t.delegate(".fb-res-button-touch","click",function(t){e.saveResData(t)
}),a.delegate(".fb-res-button-touch","click",function(t){e.saveEcData(t)}),s.delegate(".fb-res-button-touch","click",function(){e.saveRsData()})},addStyle:function(e){var t=document.createElement("style");t.type="text/css",t.className="feedback_async",t.appendChild(document.createTextNode(e)),document.getElementsByTagName("HEAD")[0].appendChild(t)},saveResData:function(e){var t=this,a=$(e.currentTarget).closest(".result"),n=new Date,s=[],i=(n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate()+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds(),{query:decodeURIComponent(page.comm.query),pageUrl:window.location.href,username:page.comm.user&&page.comm.user.uname,srcid:a.attr("srcid"),newsrcid:a.attr("new_srcid"),cardTpl:a.attr("tpl"),cururl:$.parseJSON(a.attr("data-log").replace(/\'/g,'"')).mu,cardOrder:a.attr("order"),entry:"2"});
s=-1!==["www_normal","h5_mobile"].indexOf(a.attr("tpl"))?t.normalContent.concat(t.baseContent):t.baseContent;var r={title:t.contentTitle,content:s,inputData:i};t.setSession(r)},saveEcData:function(e){var t=this,a=$(e.currentTarget).closest(".ec_wise_ad"),n={query:decodeURIComponent(page.comm.query),pageUrl:window.location.href,username:page.comm.user&&page.comm.user.uname,cardTpl:a[0].className,srcid:$(a.children()[0]).attr("sourceid"),entry:"2"},s={title:t.contentTitle,inputData:n,content:t.ecContent};
t.setSession(s)},saveRsData:function(){var e=this,t={query:decodeURIComponent(page.comm.query),pageUrl:window.location.href,username:page.comm.user&&page.comm.user.uname,cardTpl:"rs",entry:"2"},a={title:e.contentTitle,inputData:t,content:e.rsContent};e.setSession(a)},setSession:function(e){var t=JSON.stringify(e);page.utils.ss.setItem("feedback",t),this.destroy(),fif.action.redirect(this.sfUrl,null,{useWebview:!1,view:{_hold:2}})},saveSugData:function(){var e=this,t={query:decodeURIComponent(page.comm.query),pageUrl:window.location.href,username:page.comm.user&&page.comm.user.uname,entry:"3"},a={title:"哪些联想查询属于不当内容？",inputData:t,sugData:e.sugData,type:"sug"},n=JSON.stringify(a);
page.utils.ss.setItem("feedback",n),setTimeout(function(){fif.action.redirect(e.sfUrl,null,{useWebview:!1,view:{_hold:2}})},100)},saveAlaData:function(){var e=JSON.parse(this.alaParams.content),t=n.find(".result").eq(this.alaParams.order-1);if("[object Object]"===Object.prototype.toString.call(e)){var a=[];$.each(e,function(e,t){t.selected=!1,a.push(t)}),e=a}else e.forEach(function(e){e.selected=!1});var s={query:decodeURIComponent(page.comm.query),pageUrl:window.location.href,cardOrder:this.alaParams.order,extData:JSON.stringify(this.alaParams.ext),feedbackType:this.alaParams.feedbackType,fold:this.alaParams.fold||0,srcid:t.attr("srcid"),newsrcid:t.attr("new_srcid"),cardTpl:t.attr("tpl"),cururl:$.parseJSON(t.attr("data-log").replace(/\'/g,'"')).mu,entry:"ala"},i={title:this.alaParams.title||this.contentTitle,inputData:s,content:e,type:"ala"},r=JSON.stringify(i);
page.utils.ss.setItem("feedback",r),fif.action.redirect(this.sfUrl,null,{useWebview:!1,view:{_hold:2}})},sendLog:function(e){var t=void 0;t="user"===e?8:1,page&&page.log&&page.log.send({ct:45,cst:t,clk_info:e})},myFeedClick:function(e){var t=this;fif.action.redirect(t.myFeedback,null,{useWebview:!1,view:{_hold:2}}),e.preventDefault(),t.destroy(),this.sendLog("user")},destroy:function(){n.removeAttr("style"),this.maskShow=!1,n.find(".fb-res-mask").remove(),n.find(".fb-mask").remove(),n.find(".fb-bar-bottom").remove()
}}}}(s,s.exports);var i=s.exports.default||s.exports;i.render=i.render||n.exports.render,i.staticRenderFns=n.exports.staticRenderFns,i.data=function(){return{maskShow:!1,fbMaskStyle:"",myFeedback:"/sf?pd=sd_feedback&openapi=1&dspName=iphone&from_sf=1&resource_id=37789&word=%E7%94%A8%E6%88%B7%E5%8F%8D%E9%A6%88&tn=wisexmlnew&dsp=iphone&top=%7B%22sfhl%22%3A1%7D",sfUrl:'/sf?pd=sd_feedback&word=用户反馈&openapi=1&from_sf=1&resource_id=37645&top={"sfhs":0}&title=%E7%94%A8%E6%88%B7%E5%8F%8D%E9%A6%88&tn=tangram&dspName=iphone',barText:"请选择以下结果进行反馈：",contentTitle:"选择您的问题类型？",baseContent:[{appid:"",function_type:"25333",product_type:"25051",text:"内容或图片陈旧",selected:!1},{appid:"",function_type:"25056",product_type:"25051",text:"变形、错乱、乱码等问题",selected:!1},{appid:"",function_type:"25336",product_type:"25051",text:"这条结果与搜索词无关",selected:!1},{appid:"",function_type:"25340",product_type:"25051",text:"其他问题及建议",selected:!1}],normalContent:[{appid:"218094",function_type:"",product_type:"28967",text:"申请删除或更新这条结果",selected:!1},{appid:"218094",function_type:"",product_type:"34222",text:"侵犯个人隐私权益",selected:!1},{appid:"218094",function_type:"",product_type:"34221",text:"举报色情、赌博、非法结果",selected:!1},{appid:"",function_type:"45564",product_type:"25051",text:"医疗、政府网站问题"}],ecContent:[{appid:"517",function_type:"25064",product_type:"25051",text:"推广信息侵权",selected:!1},{appid:"517",function_type:"25065",product_type:"25051",text:"推广信息质量差",selected:!1},{appid:"517",function_type:"25339",product_type:"25051",text:"推广信息与搜索词无关",selected:!1},{appid:"",function_type:"45564",product_type:"25051",text:"医疗、政府网站问题"},{appid:"517",function_type:"25058",product_type:"25051",text:"其他问题及产品建议",selected:!1}],rsContent:[{appid:"218094",function_type:"",product_type:"28968",text:"申请删除提示词",selected:!1}],isMyFeedback:!1}
},i.props={show:{type:Boolean,"default":!1},alaShow:{type:Boolean,"default":!1},sugShow:{type:Boolean,"default":!1},type:{type:String,"default":""},title:{type:String,"default":"在此区域反馈您遇到的问题"},sugData:{type:Array,"default":function(){return[]}},alaParams:{type:Object,"default":function(){return{}}}},i.components={"c-row":e("search-ui/v2/Row/Row"),"c-span":e("search-ui/v2/Row/Span"),"c-icon":e("search-ui/v2/Icon/Icon")};var r=i.created;i.created=function(){var e=this;e.$super={render:function(){return n.exports.render.apply(e,arguments)
}},r&&r.call(e)},a.exports=i});